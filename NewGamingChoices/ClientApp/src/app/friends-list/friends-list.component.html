<div style="margin-left: 4px; margin-top: 10px;">
  <div class="container">
    <h1 class="nk-decorated-h-3"><span>Ma liste d'amis</span></h1>

    <div class="nk-info-box text-danger" *ngIf="errormessage">
      <div class="nk-info-box-icon">
        <i class="ion-close-round"></i>
      </div>
      <div class="nk-info-box-close nk-info-box-close-btn">
        <i class="ion-close-round"></i>
      </div>
      <h3>Erreur</h3>
      {{errormessage.error}}
    </div>

    <div class="nk-info-box text-success" *ngIf="successmessage">
      <div class="nk-info-box-icon">
        <i class="ion-checkmark-round"></i>
      </div>
      <div class="nk-info-box-close nk-info-box-close-btn">
        <i class="ion-close-round"></i>
    </div>
      <h3>{{successtitle}}</h3>
      {{successmessage}}
    </div>

    <form action="#" method="post" class="nk-form nk-form-style-1">
      <div class="input-group">
          <input (input)="updateFriendSugg()" type="text" name="friendsearchbar" [(ngModel)]="friendsearchbarvalue" class="form-control" placeholder="Ajouter un ami..." [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">

            <mat-option (click)="getSearchFriendDetails()" data-toggle="modal" data-target="#searchfriendModal" *ngFor="let friendsuggestion of friendsuggestions" [value]="friendsuggestion">
              {{friendsuggestion}}
            </mat-option>
          </mat-autocomplete>

          <button (click)="getSearchFriendDetails()" data-toggle="modal" data-target="#searchfriendModal" class="nk-btn nk-btn-color-main-1">
              <span class="fa fa-search"></span>
          </button>
      </div>
    </form>

<div class="nk-gap-2"></div>

<div class="row vertical-gap">

  <div class="col-lg-6">
    <table class="nk-table">
      <tbody>
        <tr>
          <th colspan="2">Amis</th>
        </tr>
          <tr *ngFor="let friend of friendslist;">
              <td>{{friend.userName}}</td>
              <td width="1"><div (click)="selectedFriendForDeletion = friend;" title="Retirer cet ami de la liste" data-toggle="modal" data-target="#deleteFriendModal" class="ion-close icon-validate"></div></td>
          </tr>
      </tbody>
    </table>
  </div>

  <div class="col-lg-6">
    <table class="nk-table">
      <tbody>
        <tr>
          <th colspan="3">Demandes en attente</th>
        </tr>
          <tr *ngFor="let askingfriend of askingfriendslist;">
              <td>{{askingfriend.userName}}</td>
              <td width="1"><div (click)="addFriend(askingfriend)" title="Valider la demande d'ami" class="ion-checkmark text-success icon-validate"></div></td>
              <td width="1"><div (click)="deleteFR(askingfriend)" title="Refuser la demande d'ami" class="ion-close text-danger icon-validate"></div></td>
          </tr>
      </tbody>
    </table>
  </div>

</div>


  </div>
</div>

<!-- Modale recherche -->
<div class="nk-modal modal fade" id="searchfriendModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-body">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span class="ion-android-close"></span>
              </button>



              <div *ngIf="friendwithdetails" class="container">
                <h3 style="margin-right: 22px;" class="nk-decorated-h-3"><span>Demande d'ami : <span style="font-weight: bold;" class="text-main-1">{{friendwithdetails.userName}}</span></span></h3>

                <div class="text-white">
                  Envoyer une demande d'ami à <span style="font-weight: bold;" class="text-main-1">{{friendwithdetails.userName}}</span> ?
                <div class="nk-gap-2"></div>

                <div style="text-align: center;">
                  <button class="nk-btn nk-btn-rounded nk-btn-color-main-1" data-dismiss="modal" (click)="sendFR()">Envoyer <span class="ion-paper-airplane"></span></button>
                </div>


                </div>
              </div>

              <div *ngIf="!friendwithdetails" class="container">

                    <h4 class="mb-0">I am <span class="text-main-1">Error</span></h4>
                    <div class="nk-gap-1"></div>

                    <div class="text-white">
                      Désolé, aucun utilisateur du nom de <span style="font-weight: bold;" class="text-main-1">{{wrongsearchbuff}}</span> n'a été trouvé dans notre base de données...
                      <div class="nk-gap-2"></div>

                      <div style="text-align: center;">
                      <a href="#" data-dismiss="modal" class="nk-btn nk-btn-rounded nk-btn-color-dark-1">Annuler</a>
                      </div>

                    </div>

              </div>
          </div>
     </div>
  </div>
</div>

<!-- Fin modale recherche -->

<!-- Modale suppression -->
<div class="nk-modal modal fade" id="deleteFriendModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
          <div class="modal-body">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span class="ion-android-close"></span>
              </button>

              <h4 class="mb-0"><span class="text-main-1">Retirer un ami</span> de ma liste</h4>

              <div class="nk-gap-1"></div>
              <form action="#" class="nk-form text-white">
                          Es-tu sûr de vouloir retirer <span *ngIf="selectedFriendForDeletion" style="font-weight: bold;" class="text-main-1">{{selectedFriendForDeletion.userName}}</span> de ta liste d'amis ?


                  <div class="nk-gap-1"></div>

                    <div class="row vertical-gap">
                        <div class="col-md-6">
                          <a (click)="deleteSelectedFriend()" href="#" data-dismiss="modal" class="nk-btn nk-btn-rounded nk-btn-color-main-1 nk-btn-block"><span class="icon ion-close"></span> Retirer</a>
                        </div>
                        <div class="col-md-6">
                          <a href="#" data-dismiss="modal" class="nk-btn nk-btn-rounded nk-btn-color-dark-1 nk-btn-block">Annuler</a>
                        </div>
                    </div>
              </form>
          </div>
      </div>
  </div>
</div>
<!-- Fin modale suppression -->


<img class="nk-page-background-top" src="assets/images/bg-top-2.png" alt="">
